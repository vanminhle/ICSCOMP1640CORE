@using ICSCOMP1640CORE.Utilities
@model IEnumerable<ICSCOMP1640CORE.Models.Idea>
@{
    ViewBag.Title = "Get Trainee Courses";
	Pager pager = new Pager();

	int pageNo = 0;

	if (ViewBag.Pager != null)
	{
		pager = ViewBag.Pager;
		pageNo = pager.CurrentPage;
	}
}

@using (Html.BeginForm("GetIdeaFromCoor", "Coordinators", FormMethod.Get))
{
    <div class="d-flex flex-sm-row flex-column justify-content-between mb-4 mt-2" style="align-items: baseline;">
        <h2 class="flex-row text-center mt-2">Idea From Coordinator Department</h2>
        <div class="d-flex mt-2 align-self-md-baseline align-self-sm-stretch" style="gap: 4px">
            @Html.TextBox("searchString", null, new { @class = "form-control", @placeholder = "Find By Name" })
            <button  type="submit" class="btn btn-primary"><i class="fa fa-search rounded-circle" aria-hidden="true"></i></button>
        </div>
    </div>


    <div class="table-responsive" style="text-align: center">
        <table class="table table-bordered">
            <thead class="thead-dark">
                <tr>
				<th scope="col" >Idea Name</th>
				<th scope="col" >Content Of Idea</th>
                <th scope="col" >Author</th>
                <th scope="col" >Category</th>
                <th scope="col" >Submit Date</th>
                <th scope="col" >Delete</th>
				<th scope="col" >View</th>
			</tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
						<th class="align-middle" scope="row">@item.IdeaName</th>
						<th class="align-middle" scope="row">@item.Content</th>
						<td class="align-middle" scope="row">@item.User.UserName</td>
						<td class="align-middle" scope="row">@item.Category.Name</td>
						<td class="align-middle" scope="row">@item.SubmitDate</td>
						<td class="align-middle" scope="row">
							@Html.ActionLink("", "DeleteIdea","Coordinators", new { Id = item.Id }, new { @class = "btn btn-danger fas fa-trash-alt space", @title = "Delete" })
						</td>
						<td class="align-middle" scope="row">
							@Html.ActionLink("", "ViewIdea", "Coordinators", new { id = item.Id }, new { @class = "btn btn-info fa fa-eye", @title = "Info" })
						</td>
					</tr>
                }
            </tbody>
        </table>
    </div>
}

<div class="d-flex justify-content-center mt-3">
	@if (pager.TotalPages > 1)
	{
		<ul class="pagination justify-content-end">

			@if (pager.CurrentPage > 0)
			{
				<li class="page-item">
					<a class="page-link" asp-controller="Coordinators" asp-action="GetIdeaFromCoor" asp-route-pg="1">First</a>
				</li>
				<li class="page-item">
					<a class="page-link" asp-controller="Coordinators" asp-action="GetIdeaFromCoor" asp-route-pg="@(pager.CurrentPage-1)">Previous</a>
				</li>
			}

			@for (var pge = pager.StartPage; pge <= pager.EndPage; pge++)
			{
				<li class="page-item @(pge == pager.CurrentPage ? "active" : "")">
					<a class="page-link" asp-controller="Coordinators" asp-action="GetIdeaFromCoor" asp-route-pg="@pge">@pge</a>
				</li>
			}

			@if (pager.CurrentPage < pager.TotalPages)
			{
				<li class="page-item">
					<a class="page-link" asp-controller="Coordinators" asp-action="GetIdeaFromCoor" asp-route-pg="@(pager.CurrentPage+1)">Next</a>
				</li>
				<li class="page-item">
					<a class="page-link" asp-controller="Coordinators" asp-action="GetIdeaFromCoor" asp-route-pg="@(pager.TotalPages)">Last</a>
				</li>
			}

		</ul>
	}
</div>